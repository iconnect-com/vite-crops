"use strict";(self.webpackChunkcommodityvirtualdashboard=self.webpackChunkcommodityvirtualdashboard||[]).push([[8649],{51382:(e,o,r)=>{r.d(o,{A:()=>n});r(65043);const n=r.p+"static/media/Avatar.c8b2346c8d5f54b6866e2cbeccd91ead.svg"},88764:(e,o,r)=>{r.d(o,{AN:()=>y,G7:()=>x,LR:()=>S,Uk:()=>g,dZ:()=>j,iY:()=>w,jR:()=>b,q:()=>C,tk:()=>T,uf:()=>E,vz:()=>f,zU:()=>A});var n=r(65043),t=r(90914),s=r(97864),a=r(12836),i=r(59781),l=r(75604),u=r(17586),d=r(42145),c=r(22359),v=r(79698),p=r(77154),m=r(73216);const h="There was an error contacting the server.";function f(){const e=(0,n.useContext)(t.c);return(0,a.n)({mutationFn:async e=>(await(0,c.S)({url:"/auth/login",method:"POST",data:e,headers:{"Content-Type":"application/json"}})).data,onSuccess:o=>{(0,u.Sv)("Login Successful"),(0,s.h8)(o.token),e.authenticate(o.token)},onError:e=>{var o,r,n,t;const s=null!==e&&void 0!==e&&null!==(o=e.response)&&void 0!==o&&null!==(r=o.data)&&void 0!==r&&r.error?null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.error:h;d.oR.error(s,u.S1)}})}function S(){const e=(0,m.Zp)(),{mutate:o,isError:r,error:n,isSuccess:t,reset:s}=(0,a.n)({mutationFn:e=>async function(e){const o=await(0,c.S)({url:"/auth/user/create",method:"POST",data:e,headers:{"Content-Type":"application/json"}});return null===o||void 0===o?void 0:o.data}(e),onSuccess:o=>{e("/login"),(0,u.Sv)("Registration Successful")},onError:e=>{var o,r,n,t;const s=null!==e&&void 0!==e&&null!==(o=e.response)&&void 0!==o&&null!==(r=o.data)&&void 0!==r&&r.error?null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.error:h;d.oR.error(s,u.S1)}});return{mutate:o,isError:r,error:n,isSuccess:t,reset:s}}function x(){const e=(0,m.Zp)(),{mutate:o,isError:r,error:n,isSuccess:t,reset:s}=(0,a.n)({mutationFn:e=>async function(e){const o=await(0,c.S)({url:"/auth/forgotpassword",method:"POST",data:e,headers:{"Content-Type":"application/json"}});return null===o||void 0===o?void 0:o.data}(e),onSuccess:o=>{e("/login"),(0,u.Sv)("Check your Mailbox for instructions")},onError:e=>{var o,r,n,t;const s=null!==e&&void 0!==e&&null!==(o=e.response)&&void 0!==o&&null!==(r=o.data)&&void 0!==r&&r.error?null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.error:h;d.oR.error(s,u.S1)}});return{mutate:o,isError:r,error:n,isSuccess:t,reset:s}}function y(){const e=(0,m.Zp)(),{mutate:o,isError:r,error:n,isSuccess:t,reset:s}=(0,a.n)({mutationFn:e=>async function(e){const o=await(0,c.S)({url:"/auth/admin/create",method:"POST",data:e,headers:{"Content-Type":"application/json"}});return null===o||void 0===o?void 0:o.data}(e),onSuccess:o=>{(0,u.Sv)("Admin Registration Successful"),e("/login")},onError:e=>{var o,r,n,t;const s=null!==e&&void 0!==e&&null!==(o=e.response)&&void 0!==o&&null!==(r=o.data)&&void 0!==r&&r.error?null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.error:h;d.oR.error(s,u.S1)}});return{mutate:o,isError:r,error:n,isSuccess:t,reset:s}}function j(){const e=(0,i.jE)(),{mutate:o,isError:r,error:n,isSuccess:t,reset:l,data:d}=(0,a.n)({mutationFn:e=>async function(e){const o=await(0,c.S)({url:"/auth/me",method:"PUT",data:e,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat((0,s.l)())}});return null===o||void 0===o?void 0:o.data}(e),onSuccess:o=>{e.invalidateQueries([v.l.me])},onError:e=>{(0,u.n7)(e)}});return{mutate:o,isError:r,error:n,isSuccess:t,reset:l,data:d}}function g(e){const o=(0,i.jE)(),{mutate:r,isError:n,error:t,isSuccess:l,reset:p,data:m}=(0,a.n)({mutationFn:o=>async function(e,o){try{return(await c.S.put("/auth/".concat(e,"/photo"),o,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat((0,s.l)())}})).data}catch(t){var r;throw(null===(r=t.response)||void 0===r?void 0:r.data)||t.message}}(e,o),onSuccess:()=>{o.invalidateQueries([v.l.user]),(0,u.Sv)("Profile picture uploaded Successful")},onError:e=>{var o,r,n,t;const s=null!==e&&void 0!==e&&null!==(o=e.response)&&void 0!==o&&null!==(r=o.data)&&void 0!==r&&r.error?null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.error:h;d.oR.error(s,u.S1)}});return{mutate:r,isError:n,error:t,isSuccess:l,reset:p,data:m,uploadProfilePromise:e=>new Promise(((o,n)=>{r(e,{onSuccess:()=>{o(m)},onError:e=>{n(e)}})}))}}function E(){const e={},{data:o=e}=(0,l.I)({queryKey:[v.l.user],queryFn:()=>async function(){const e=await(0,c.S)({url:"/auth/me",method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,s.l)())}});return null===e||void 0===e?void 0:e.data}(),onSuccess:()=>{},onError:e=>{var o,r,n,t;const s=null!==e&&void 0!==e&&null!==(o=e.response)&&void 0!==o&&null!==(r=o.data)&&void 0!==r&&r.error?null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.error:h;d.oR.error(s,u.S1)}});return o}function w(){const e=(0,i.jE)(),{mutate:o,isError:r,error:n,isSuccess:t,reset:l}=(0,a.n)({mutationFn:e=>async function(e){const o=await(0,c.S)({url:"/auth/".concat(e),method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,s.l)())}});return null===o||void 0===o?void 0:o.data}(e),onSuccess:o=>{e.invalidateQueries([v.l.users]),(0,u.Sv)("User Deleted Successfully"),l()},onError:e=>{var o,r,n,t;const s=null!==e&&void 0!==e&&null!==(o=e.response)&&void 0!==o&&null!==(r=o.data)&&void 0!==r&&r.error?null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.error:h;d.oR.error(s,u.S1)}});return{mutate:o,isError:r,error:n,isSuccess:t,reset:l}}function T(e){const{mutate:o,isError:r,error:n,isSuccess:t,reset:s}=(0,a.n)({mutationFn:o=>async function(e,o){const r=await(0,c.S)({url:"/auth/resetpassword/".concat(o),method:"PUT",data:e,headers:{"Content-Type":"application/json"}});return null===r||void 0===r?void 0:r.data}(o,e),onSuccess:e=>{(0,u.Sv)("Password Changed Successfully"),s()},onError:e=>{var o,r,n,t;const s=null!==e&&void 0!==e&&null!==(o=e.response)&&void 0!==o&&null!==(r=o.data)&&void 0!==r&&r.error?null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.error:h;d.oR.error(s,u.S1)}});return{mutate:o,isError:r,error:n,isSuccess:t,reset:s}}function b(){const e={},{data:o=e}=(0,l.I)({queryKey:[v.l.users],queryFn:()=>async function(){const e=await(0,c.S)({url:"/auth/user",method:"GET"});return null===e||void 0===e?void 0:e.data}(),onSuccess:()=>{},onError:e=>{var o,r,n,t;const s=null!==e&&void 0!==e&&null!==(o=e.response)&&void 0!==o&&null!==(r=o.data)&&void 0!==r&&r.error?null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.error:h;d.oR.error(s,u.S1)}});return o}function C(){const e={},{data:o=e}=(0,l.I)({queryKey:[v.l.usersRole],queryFn:()=>async function(){const e=await(0,c.S)({url:"/auth/GetRegisteredUser",method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,s.l)())}});return null===e||void 0===e?void 0:e.data}(),onSuccess:()=>{},onError:e=>{var o,r,n,t;const s=null!==e&&void 0!==e&&null!==(o=e.response)&&void 0!==o&&null!==(r=o.data)&&void 0!==r&&r.error?null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.error:h;d.oR.error(s,u.S1)}});return o}function A(e){const o={},{data:r=o,error:n}=(0,l.I)(["exchangeRate",e],(()=>async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(await p.A.get("https://v6.exchangerate-api.com/v6/".concat("08c1fdd92760e0126191fc0d","/latest/").concat(e))).data}(e)));return r}},48649:(e,o,r)=>{r.d(o,{A:()=>E});var n=r(65043),t=r(90914),s=r(15546),a=r(48677),i=r(10881),l=r(35475),u=r(73216),d=r(36428),c=r(88764),v=r(51382),p=r(70579);const m=e=>{let{pageTitle:o}=e;const r=(0,c.uf)();(0,n.useEffect)((()=>{if(null!==r&&void 0!==r&&r.photo){const e=null===r||void 0===r?void 0:r.photo;i(e)}}),[null===r||void 0===r?void 0:r.photo]);const{user:s}=(0,n.useContext)(t.c),[a,i]=n.useState(null);return(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsx)("h3",{className:"text-2xl font-semibold",children:o}),(0,p.jsx)("div",{className:"hidden md:flex items-center gap-4",children:(0,p.jsxs)("div",{className:"flex items-center gap-4 bg-white rounded-full p-2",children:[(0,p.jsx)("img",{src:a||v.A,alt:"man",className:"w-10 h-10 rounded-full"}),(0,p.jsxs)("div",{className:"",children:[(0,p.jsxs)("h4",{className:"text-sm font-medium leading-none mb-2",children:[null===s||void 0===s?void 0:s.fullname," "]}),(0,p.jsx)("p",{className:"text-[10px] font-medium mt-1 leading-none",children:null===s||void 0===s?void 0:s.role})]}),(0,p.jsx)("div",{className:"h-2 w-2 flex items-center justify-center rounded-full"})]})})]}),(0,p.jsxs)("div",{className:"mt-2 text-lg font-bold",children:["Welcome Back, ",null===s||void 0===s?void 0:s.fullname," "]}),(0,p.jsxs)("div",{className:"text-sm",children:[" ","It's great seeing you again, do have a nice day"]})]})};var h=r(67937),f=r(15834),S=r(43244),x=r(53722),y=r(31765),j=r(36160);function g(e,o,r,n,t){return{key:o,icon:n,type:t,label:(0,p.jsx)(l.N_,{to:o,children:e})}}const E=e=>{let{children:o,pageTitle:r}=e;const[l,c]=(0,n.useState)(!1),{logout:v}=(0,n.useContext)(t.c),E=(0,u.Zp)(),w=(0,u.zy)(),T=[g("Dashboard","/app/dashboard",0,(0,p.jsx)(h.A,{})),g("Configuration","/app/configuration",0,(0,p.jsx)(f.A,{})),g("Users","/app/users",0,(0,p.jsx)(S.A,{})),g("Profile","/app/profile",0,(0,p.jsx)(x.A,{})),g("Reporting","/app/reporting",0,(0,p.jsx)(y.A,{})),g("Logout","",0,(0,p.jsx)(j.A,{}))];return(0,p.jsx)(s.A,{children:(0,p.jsxs)("div",{className:"flex justify-start h-screen",children:[(0,p.jsx)("div",{className:"bg-white py-14 px-10",style:{width:"30px",display:"flex",justifyContent:"center",alignItems:"flex-start"},children:(0,p.jsx)(d.A,{onClick:()=>{c(!l)}})}),(0,p.jsx)(a.A,{placement:"left",width:270,closable:!1,onClose:()=>{c(!1)},open:l,mask:!0,maskClosable:!0,styles:{content:{boxShadow:"none",borderRight:"none"}},children:(0,p.jsx)(i.A,{defaultOpenKeys:["sub1"],className:"!border-none",mode:"inline",items:T,onClick:e=>""===e.key?(v(),window.location.reload(),void E("/")):void 0,selectedKeys:[w.pathname]})}),(0,p.jsxs)("div",{className:"overflow-x-hidden p-10 flex-col flex-grow",children:[(0,p.jsx)(m,{pageTitle:r}),(0,p.jsx)("div",{className:" mt-10",children:o})," "]})]})})}}}]);
//# sourceMappingURL=8649.5c5f4fdd.chunk.js.map