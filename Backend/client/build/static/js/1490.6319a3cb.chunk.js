"use strict";(self.webpackChunkcommodityvirtualdashboard=self.webpackChunkcommodityvirtualdashboard||[]).push([[1490],{51382:(e,o,r)=>{r.d(o,{A:()=>t});r(65043);const t=r.p+"static/media/Avatar.c8b2346c8d5f54b6866e2cbeccd91ead.svg"},88764:(e,o,r)=>{r.d(o,{AN:()=>S,G7:()=>y,LR:()=>x,Uk:()=>g,dZ:()=>j,iY:()=>b,jR:()=>E,q:()=>k,tk:()=>w,uf:()=>A,vz:()=>f,zU:()=>N});var t=r(65043),n=r(90914),s=r(97864),a=r(12836),i=r(59781),l=r(75604),d=r(17586),u=r(42145),c=r(22359),v=r(79698),m=r(77154),h=r(73216);const p="There was an error contacting the server.";function f(){const e=(0,t.useContext)(n.c);return(0,a.n)({mutationFn:async e=>(await(0,c.S)({url:"/auth/login",method:"POST",data:e,headers:{"Content-Type":"application/json"}})).data,onSuccess:o=>{(0,d.Sv)("Login Successful"),(0,s.h8)(o.token),e.authenticate(o.token)},onError:e=>{var o,r,t,n;const s=null!==e&&void 0!==e&&null!==(o=e.response)&&void 0!==o&&null!==(r=o.data)&&void 0!==r&&r.error?null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error:p;u.oR.error(s,d.S1)}})}function x(){const e=(0,h.Zp)(),{mutate:o,isError:r,error:t,isSuccess:n,reset:s}=(0,a.n)({mutationFn:e=>async function(e){const o=await(0,c.S)({url:"/auth/user/create",method:"POST",data:e,headers:{"Content-Type":"application/json"}});return null===o||void 0===o?void 0:o.data}(e),onSuccess:o=>{e("/login"),(0,d.Sv)("Registration Successful")},onError:e=>{var o,r,t,n;const s=null!==e&&void 0!==e&&null!==(o=e.response)&&void 0!==o&&null!==(r=o.data)&&void 0!==r&&r.error?null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error:p;u.oR.error(s,d.S1)}});return{mutate:o,isError:r,error:t,isSuccess:n,reset:s}}function y(){const e=(0,h.Zp)(),{mutate:o,isError:r,error:t,isSuccess:n,reset:s}=(0,a.n)({mutationFn:e=>async function(e){const o=await(0,c.S)({url:"/auth/forgotpassword",method:"POST",data:e,headers:{"Content-Type":"application/json"}});return null===o||void 0===o?void 0:o.data}(e),onSuccess:o=>{e("/login"),(0,d.Sv)("Check your Mailbox for instructions")},onError:e=>{var o,r,t,n;const s=null!==e&&void 0!==e&&null!==(o=e.response)&&void 0!==o&&null!==(r=o.data)&&void 0!==r&&r.error?null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error:p;u.oR.error(s,d.S1)}});return{mutate:o,isError:r,error:t,isSuccess:n,reset:s}}function S(){const e=(0,h.Zp)(),{mutate:o,isError:r,error:t,isSuccess:n,reset:s}=(0,a.n)({mutationFn:e=>async function(e){const o=await(0,c.S)({url:"/auth/admin/create",method:"POST",data:e,headers:{"Content-Type":"application/json"}});return null===o||void 0===o?void 0:o.data}(e),onSuccess:o=>{(0,d.Sv)("Admin Registration Successful"),e("/login")},onError:e=>{var o,r,t,n;const s=null!==e&&void 0!==e&&null!==(o=e.response)&&void 0!==o&&null!==(r=o.data)&&void 0!==r&&r.error?null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error:p;u.oR.error(s,d.S1)}});return{mutate:o,isError:r,error:t,isSuccess:n,reset:s}}function j(){const e=(0,i.jE)(),{mutate:o,isError:r,error:t,isSuccess:n,reset:l,data:u}=(0,a.n)({mutationFn:e=>async function(e){const o=await(0,c.S)({url:"/auth/me",method:"PUT",data:e,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat((0,s.l)())}});return null===o||void 0===o?void 0:o.data}(e),onSuccess:o=>{e.invalidateQueries([v.l.me])},onError:e=>{(0,d.n7)(e)}});return{mutate:o,isError:r,error:t,isSuccess:n,reset:l,data:u}}function g(e){const o=(0,i.jE)(),{mutate:r,isError:t,error:n,isSuccess:l,reset:m,data:h}=(0,a.n)({mutationFn:o=>async function(e,o){try{return(await c.S.put("/auth/".concat(e,"/photo"),o,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat((0,s.l)())}})).data}catch(n){var r;throw(null===(r=n.response)||void 0===r?void 0:r.data)||n.message}}(e,o),onSuccess:()=>{o.invalidateQueries([v.l.user]),(0,d.Sv)("Profile picture uploaded Successful")},onError:e=>{var o,r,t,n;const s=null!==e&&void 0!==e&&null!==(o=e.response)&&void 0!==o&&null!==(r=o.data)&&void 0!==r&&r.error?null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error:p;u.oR.error(s,d.S1)}});return{mutate:r,isError:t,error:n,isSuccess:l,reset:m,data:h,uploadProfilePromise:e=>new Promise(((o,t)=>{r(e,{onSuccess:()=>{o(h)},onError:e=>{t(e)}})}))}}function A(){const e={},{data:o=e}=(0,l.I)({queryKey:[v.l.user],queryFn:()=>async function(){const e=await(0,c.S)({url:"/auth/me",method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,s.l)())}});return null===e||void 0===e?void 0:e.data}(),onSuccess:()=>{},onError:e=>{var o,r,t,n;const s=null!==e&&void 0!==e&&null!==(o=e.response)&&void 0!==o&&null!==(r=o.data)&&void 0!==r&&r.error?null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error:p;u.oR.error(s,d.S1)}});return o}function b(){const e=(0,i.jE)(),{mutate:o,isError:r,error:t,isSuccess:n,reset:l}=(0,a.n)({mutationFn:e=>async function(e){const o=await(0,c.S)({url:"/auth/".concat(e),method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,s.l)())}});return null===o||void 0===o?void 0:o.data}(e),onSuccess:o=>{e.invalidateQueries([v.l.users]),(0,d.Sv)("User Deleted Successfully"),l()},onError:e=>{var o,r,t,n;const s=null!==e&&void 0!==e&&null!==(o=e.response)&&void 0!==o&&null!==(r=o.data)&&void 0!==r&&r.error?null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error:p;u.oR.error(s,d.S1)}});return{mutate:o,isError:r,error:t,isSuccess:n,reset:l}}function w(e){const{mutate:o,isError:r,error:t,isSuccess:n,reset:s}=(0,a.n)({mutationFn:o=>async function(e,o){const r=await(0,c.S)({url:"/auth/resetpassword/".concat(o),method:"PUT",data:e,headers:{"Content-Type":"application/json"}});return null===r||void 0===r?void 0:r.data}(o,e),onSuccess:e=>{(0,d.Sv)("Password Changed Successfully"),s()},onError:e=>{var o,r,t,n;const s=null!==e&&void 0!==e&&null!==(o=e.response)&&void 0!==o&&null!==(r=o.data)&&void 0!==r&&r.error?null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error:p;u.oR.error(s,d.S1)}});return{mutate:o,isError:r,error:t,isSuccess:n,reset:s}}function E(){const e={},{data:o=e}=(0,l.I)({queryKey:[v.l.users],queryFn:()=>async function(){const e=await(0,c.S)({url:"/auth/user",method:"GET"});return null===e||void 0===e?void 0:e.data}(),onSuccess:()=>{},onError:e=>{var o,r,t,n;const s=null!==e&&void 0!==e&&null!==(o=e.response)&&void 0!==o&&null!==(r=o.data)&&void 0!==r&&r.error?null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error:p;u.oR.error(s,d.S1)}});return o}function k(){const e={},{data:o=e}=(0,l.I)({queryKey:[v.l.usersRole],queryFn:()=>async function(){const e=await(0,c.S)({url:"/auth/GetRegisteredUser",method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,s.l)())}});return null===e||void 0===e?void 0:e.data}(),onSuccess:()=>{},onError:e=>{var o,r,t,n;const s=null!==e&&void 0!==e&&null!==(o=e.response)&&void 0!==o&&null!==(r=o.data)&&void 0!==r&&r.error?null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error:p;u.oR.error(s,d.S1)}});return o}function N(e){const o={},{data:r=o,error:t}=(0,l.I)(["exchangeRate",e],(()=>async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(await m.A.get("https://v6.exchangerate-api.com/v6/".concat("08c1fdd92760e0126191fc0d","/latest/").concat(e))).data}(e)));return r}},91490:(e,o,r)=>{r.d(o,{A:()=>R});var t=r(65043),n=r(15546),s=r(2761),a=r(87021),i=r(10881),l=r(48677),d=r(35475),u=r(73216),c=r(53727),v=r(90914),m=r(88764),h=r(61966),p=r(54522),f=r(1210),x=r(18489),y=r(50867),S=r(70579);const j=e=>{let{onClose:o}=e;const{data:r}=(0,y.sl)(),[n,s]=(0,t.useState)(r||[]),[i,l]=t.useState(!1),[d,u]=t.useState(null);t.useEffect((()=>{r&&s(Array.isArray(r)?r:[r])}),[r]);const c=e=>(0,S.jsx)(p.A.Item,{actions:[(0,S.jsx)(a.Ay,{onClick:()=>(e=>{l(!0),u(e.id)})(e),style:{backgroundColor:"#E3362930",color:"#E33629"},icon:(0,S.jsx)(h.A,{}),children:"Delete"})],children:(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{className:"font-bold text-md mt-1 flex",children:"New Price Alert"}),(0,S.jsxs)("div",{className:"mt-2 text-sm",children:["The price of ",(0,S.jsx)("span",{className:"font-bold ",children:null===e||void 0===e?void 0:e.name})," has changed from NGN ",null===e||void 0===e?void 0:e.previous_price," to NGN ",null===e||void 0===e?void 0:e.current_price]})]})},e.id),v=[{key:"1",label:"All",children:(0,S.jsx)(p.A,{itemLayout:"horizontal",dataSource:Array.isArray(n)?n:[],renderItem:c})},{key:"2",label:"New",children:(0,S.jsx)(p.A,{itemLayout:"horizontal",dataSource:Array.isArray(n)?n.filter((e=>"New"===(null===e||void 0===e?void 0:e.status))):[],renderItem:c})},{key:"3",label:"Read",children:(0,S.jsx)(p.A,{itemLayout:"horizontal",dataSource:Array.isArray(n)?n.filter((e=>"Read"===(null===e||void 0===e?void 0:e.status))):[],renderItem:c})}];return(0,S.jsx)(f.A,{open:!0,title:"Notifications",width:1e3,footer:null,onCancel:()=>{o()},children:(0,S.jsxs)("div",{children:[(0,S.jsxs)("div",{className:"flex justify-end",children:[" ",(0,S.jsx)(a.Ay,{style:{backgroundColor:"#65812729",color:"#658127"},className:"mb-4 text-sm sm:text-md",onClick:()=>{if(Array.isArray(n)){const e=null===n||void 0===n?void 0:n.map((e=>"New"===(null===e||void 0===e?void 0:e.status)?{...e,status:"Read"}:e));s(e)}},children:"Mark all as read"})]}),(0,S.jsx)(x.A,{defaultActiveKey:"1",items:v}),(0,S.jsx)(f.A,{title:"Delete Notification",open:i,onOk:()=>{l(!1)},onCancel:()=>{l(!1)},okButtonProps:{className:"!bg-[#39462D]"}})]})})};var g=r(51382),A=r(46011),b=r(225),w=r(13888),E=r(53722),k=r(36160),N=r(36428);function C(e,o,r,t,n,s){return{key:o,icon:t,type:n,label:(0,S.jsx)(d.N_,{to:s?"#":o,onClick:s,className:"text-sm",children:e})}}const{Header:T}=n.A,R=e=>{let{children:o,Heading:r,Background:d}=e;const[h,p]=(0,t.useState)(!1),{logout:f}=(0,t.useContext)(v.c),{user:x}=(0,t.useContext)(v.c),y=(0,m.uf)();(0,t.useEffect)((()=>{if(y){const e=null===y||void 0===y?void 0:y.photo;P(e)}}),[y,null===y||void 0===y?void 0:y.photo]);const[R,P]=t.useState(null),[z,F]=(0,t.useState)(!1),I=(0,u.Zp)(),K=()=>{p(!1)},q=()=>{f(),window.location.reload(),I("/")},B=[C("Home","/user/dashboard",0,(0,S.jsx)(A.A,{})),C("Market News","/user/market-news",0,(0,S.jsx)(b.A,{})),C("Notifications","#",0,(0,S.jsx)(w.A,{}),"group",(()=>F(!0))),C("Profile","/user/profile",0,(0,S.jsx)(E.A,{})),C("Logout","",0,(0,S.jsx)(k.A,{}))];return(0,S.jsx)(n.A,{children:(0,S.jsxs)("div",{className:"overflow-x-hidden gap-2 pb-8 bg-white ",children:[(0,S.jsxs)("div",{className:"sm:h-[230px] h-[100px] w-full flex items-start bg-cover bg-center justify-center flex-col gap-2 p-12",style:{backgroundImage:"linear-gradient(89.36deg, #39462D 38.02%, rgba(57, 70, 45, 0.24) 123.04%), url(".concat(d,")"),backgroundSize:"100%, 70%",backgroundPosition:"center, right",backgroundRepeat:"no-repeat"},children:[(0,S.jsx)("div",{className:"text-4xl mb-1 font-bold text-white sm:leading-tight leading-tight",children:r}),(0,S.jsx)("div",{})]}),(0,S.jsxs)(T,{className:"flex justify-between w-full items-center px-12 pt-8 mb-3 bg-white",children:[(0,S.jsxs)("div",{className:"flex w-full items-center gap-2",children:[(0,S.jsx)(s.A,{icon:(0,S.jsx)(E.A,{}),size:40,src:R||g.A})," ",(0,S.jsxs)("div",{className:"flex flex-col",children:[(0,S.jsxs)("div",{className:"ml-2 mt-2 text-sm font-bold",children:["Hello, ",null===x||void 0===x?void 0:x.fullname," "]}),(0,S.jsx)("div",{className:"ml-2 text-sm",children:"It\u2019s nice seeing you again!"})]})]}),(0,S.jsx)("div",{className:"sm:hidden shadow-none",children:(0,S.jsx)(a.Ay,{type:"text",className:"shadow-none",onClick:()=>{p(!0)},icon:(0,S.jsx)(N.A,{style:{color:"black"}})})}),(0,S.jsx)(i.A,{defaultOpenKeys:["sub1"],mode:"horizontal",className:"hidden sm:flex sm:justify-end bg-transparent border-none outline-none sm:w-full",items:B,onClick:e=>""===e.key?q():void 0,selectedKeys:[location.pathname]})]}),(0,S.jsxs)(l.A,{placement:"right",width:200,closable:!1,onClose:K,open:h,children:[(0,S.jsx)("div",{className:"flex justify-end",children:(0,S.jsx)(c.A,{onClick:K})}),(0,S.jsx)(i.A,{defaultOpenKeys:["sub1"],mode:"vertical",className:"border-none",items:B,onClick:e=>""===e.key?q():void 0,selectedKeys:[location.pathname]})]}),(0,S.jsx)("div",{className:"bg-white px-12 pt-10",children:o}),z&&(0,S.jsx)(j,{onClose:()=>{F(!1),K()}})]})})}}}]);
//# sourceMappingURL=1490.6319a3cb.chunk.js.map